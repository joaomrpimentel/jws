<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>JWS-1</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">

    <!-- Ícones (Phosphor Icons) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <button id="help-btn" class="help-btn" title="Help">?</button>

    <div class="synth-container">
        <!-- Linha Superior: Controles Principais -->
        <div class="main-controls-grid">
            <!-- Coluna Esquerda: Marca e Slider -->
            <div class="left-column">
                <a href="https://jotaverse.com.br" target="_blank" rel="noopener noreferrer" class="brand-link" title="Voltar para Jotaverse">
                    <div class="brand">JWS-1 シンセサイザー</div>
                </a>
                <div class="fader-wrapper">
                    <div class="fader-container">
                        <div class="fader-track"></div>
                        <!-- Slider de Cutoff/LFO -->
                        <input type="range" min="0" max="100" value="50" class="fader-slider" id="main-fader">
                    </div>
                    <!-- Botão de modo do Fader -->
                    <button class="fader-mode-btn" id="fader-mode-btn">CUT</button>
                </div>
            </div>

            <!-- Coluna Direita: Painel de Controle -->
            <div class="right-column">
                <div class="control-panel">
                    <div class="top-row">
                        <!-- TELA ATUALIZADA -->
                        <div class="display">
                            <canvas id="display-canvas"></canvas>
                            <div class="display-info">
                                <div id="display-param1">WAVE: SINE</div>
                                <div id="display-param2">OCT: 0</div>
                                <div id="display-param3">CUT: 1000</div>
                            </div>
                            <div id="display-message" class="display-message-overlay">READY</div>
                        </div>
                        <div class="knobs-container">
                            <!-- Knobs com Labels -->
                            <div class="knob-wrapper">
                                <div class="knob" id="knob-octave" title="Octave"></div>
                                <div class="knob-label">OCT</div>
                            </div>
                            <div class="knob-wrapper">
                                <div class="knob" id="knob-attack" title="Attack"></div>
                                <div class="knob-label">ATK</div>
                            </div>
                            <div class="knob-wrapper">
                                <div class="knob" id="knob-sustain" title="Sustain"></div>
                                <div class="knob-label">SUS</div>
                            </div>
                            <div class="knob-wrapper">
                                <div class="knob" id="knob-decay" title="Decay"></div>
                                <div class="knob-label">DEC</div>
                            </div>
                            <div class="knob-wrapper">
                                <div class="knob" id="knob-release" title="Release"></div>
                                <div class="knob-label">REL</div>
                            </div>
                        </div>
                    </div>
                    <!-- GRID UNIFICADO PARA OS BOTÕES -->
                    <div class="unified-button-grid">
                        <!-- Linha 1 -->
                        <button class="control-btn" data-wave="sine"><i class="ph-fill ph-wave-sine"></i></button>
                        <button class="control-btn num-btn">1</button>
                        <button class="control-btn num-btn">2</button>
                        <button class="control-btn" id="hold-btn" data-perform="hold">HLD</button>
                        
                        <!-- Linha 2 -->
                        <button class="control-btn" data-wave="square"><i class="ph-fill ph-wave-square"></i></button>
                        <button class="control-btn num-btn">3</button>
                        <button class="control-btn num-btn">4</button>
                        <button class="control-btn" id="mono-btn" data-perform="mono">MON</button>

                        <!-- Linha 3 -->
                        <button class="control-btn" data-wave="sawtooth"><i class="ph-fill ph-wave-sawtooth"></i></button>
                        <button class="control-btn" data-effect="reverb">REV</button>
                        <button class="control-btn" data-effect="delay">DLY</button>
                        <button class="control-btn" id="arp-btn" data-perform="arp">ARP</button>
                        
                        <!-- Linha 4 -->
                        <button class="control-btn" data-wave="triangle"><i class="ph-fill ph-wave-triangle"></i></button>
                        <button class="control-btn" data-effect="distortion">DST</button>
                        <button class="control-btn" id="sequencer-play-btn">SEQ</button>
                        <div class="arp-controls">
                            <button class="control-btn arp-direction-btn" id="arp-up-btn" data-direction="up">▲</button>
                            <button class="control-btn arp-direction-btn" id="arp-down-btn" data-direction="down">▼</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sequenciador -->
        <div class="sequencer-container">
            <div class="seq-steps" id="sequencer-steps">
                <!-- Passos do sequenciador gerados pelo JS -->
            </div>
        </div>

        <!-- Teclado -->
        <div class="keyboard-container" id="keyboard">
            <!-- Teclas geradas pelo JavaScript -->
        </div>
    </div>

    <!-- Modal de Ajuda -->
    <div id="help-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-modal-btn" class="close-btn">&times;</button>
            <h2>Welcome to JWS-1!</h2>
            <p>Here's a quick guide to get you started:</p>
            <ul>
                <li><strong>Keyboard:</strong> Play notes using your mouse or computer keyboard (A, W, S, E, D, F, T, G, Y, H, U, J, K).</li>
                <li><strong>Waveforms:</strong> Select the basic sound shape using the four icon buttons (<i class="ph ph-wave-sine"></i>, <i class="ph ph-wave-square"></i>, etc.).</li>
                <li><strong>Knobs:</strong> Click and drag vertically on the knobs to change parameters like Octave (OCT), Attack (ATK), Sustain (SUS), Decay (DEC), and Release (REL).</li>
                <li><strong>Fader:</strong> The main vertical slider controls the Filter Cutoff (CUT) or LFO Modulation (MOD). Click the button below it to switch modes.</li>
                <li><strong>Arpeggiator (ARP):</strong> Press ARP to activate. Hold down some keys. The synth will play them one by one. Use the ▲ and ▼ buttons to change the order.</li>
                <li><strong>Presets:</strong> Click buttons 1-4 to load a preset. Hold a button for 1 second to save the current sound to that slot.</li>
                <li><strong>Effects & Perform:</strong> Toggle effects like Reverb (REV) and performance modes like Hold (HLD) with their respective buttons.</li>
                <li><strong>Sequencer:</strong> Click the squares to activate steps. Press SEQ to play/stop the sequence. The sequencer will play the last note you pressed on the keyboard.</li>
            </ul>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
